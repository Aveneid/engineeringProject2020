Electronic lock with multilevel access control is a project made for course \char`\"{}\+Projekt Inżynierski\char`\"{} at Uniwersytet Pedagogiczny im. Komisji Edukacji Narodowej w Krakowie.

Main purpose for this project\+:
\begin{DoxyItemize}
\item create project with engineering aspects, like tests and analisys before implemeting solution
\item learn how to create proper documentation for projects with La\+TeX
\end{DoxyItemize}

Project desctiption\+: (PL) $>$Konstrukcja układu zamka elektronicznego z wielopoziomową kontrolą dostępu (kod alfanumeryczny, hasło dźwiękowe, karta R\+F\+ID, itp.). Zadaniem konstruktora jest zaprojektowanie i zmontowanie układu z trójstopniową kontrolą dostępu. System powinien obsługiwać klawiaturę, wyświetlacz ciekłokrystaliczny i symulować mechanizm zamka poprzez sterowanie serwomechanizmem. Wybór pozostałych typów blokad należy do projektanta. Poziom blokad i zabezpieczeń oraz postęp w ich wyłączaniu powinien być sygnalizowany przez diody L\+ED i ewentualnie sygnał dźwiękowy. Dodatkowo system powinien mieć możliwość uzbrajania poprzez sygnał Wi\+Fi np. aplikacja mobilna (smartfon). Do obsługi czujników i transmisji można wykorzystać dostępne biblioteki programistyczne.\hypertarget{md__r_e_a_d_m_e_autotoc_md1}{}\doxysection{Instalation}\label{md__r_e_a_d_m_e_autotoc_md1}
In {\ttfamily \mbox{\hyperlink{esp_main_8cpp}{espmain/esp\+Main.\+cpp}}} in line \href{https://github.com/Aveneid/engineeringProject2020/blob/master/espmain/espMain.cpp\#L726}{\texttt{ 726}} change {\ttfamily T\+E\+ST} and {\ttfamily T\+E\+S\+T1234} to your Wi-\/\+Fi B\+S\+S\+ID and password.

Compile files using for example Arduino I\+DE and upload to your device. There\textquotesingle{}s also precompiled binary available.\hypertarget{md__r_e_a_d_m_e_autotoc_md2}{}\doxysubsection{Wiring diagram}\label{md__r_e_a_d_m_e_autotoc_md2}
Feel free to not stick hardly to this schema, this is an example wiring that is used in this project. You can always change pin configuration. \hypertarget{md__r_e_a_d_m_e_autotoc_md3}{}\doxysection{Usage}\label{md__r_e_a_d_m_e_autotoc_md3}
When device is powered for first time, it will have to be configured using simple wizard.

For this step you will need\+:
\begin{DoxyItemize}
\item R\+F\+ID tag
\item pin code (max 8 characters, 0-\/9 only)
\end{DoxyItemize}

When first run wizard ends, device is ready. It will accept cards, pin codes or barcodes (using scanner), checks if they are known and let someone in or not. After 3 incorrect tries device will {\bfseries{L\+O\+CK}} for time defined by lock time (default 5 minutes).

$\ast$$\ast$\+:warning\+: Warning!$\ast$$\ast$ Remember to change administrator password in admin panel! Default password is not secure!\hypertarget{md__r_e_a_d_m_e_autotoc_md4}{}\doxysubsubsection{Adding or deleting cards}\label{md__r_e_a_d_m_e_autotoc_md4}
First you have to obtain master access (with card / token used in first run wizard), then bring card near R\+F\+ID module to scan it. If card is present in device storage -\/ will be deleted, otherwise will be added.

Cards can be deleted using administrator panel via W\+WW too.\hypertarget{md__r_e_a_d_m_e_autotoc_md5}{}\doxysubsubsection{Changing settings}\label{md__r_e_a_d_m_e_autotoc_md5}
R\+F\+ID module, pin code or barcode scanner can be disabled using administrator panel. Lock time, pin code or administrator password can be changed there as well. Just open {\ttfamily \href{http://smartlock/}{\texttt{ http\+://smartlock/}}} to access administrator panel, login with adminstrator password (default \textquotesingle{}admin\textquotesingle{}) and here you go.\hypertarget{md__r_e_a_d_m_e_autotoc_md6}{}\doxysubsubsection{Resetting to default}\label{md__r_e_a_d_m_e_autotoc_md6}
If master card was stolen, pin was lost or something else theres always an option. By shoting {\ttfamily D0} to +5V during boot an E\+E\+P\+R\+OM clear will be performed, also default values of flags and passwords will be set.

$\ast$$\ast$\+:warning\+: Warning!$\ast$$\ast$ All stored cards will be erased too! Be sure to add them after reset!\hypertarget{md__r_e_a_d_m_e_autotoc_md7}{}\doxysection{What\textquotesingle{}s inside?}\label{md__r_e_a_d_m_e_autotoc_md7}
\hypertarget{md__r_e_a_d_m_e_autotoc_md8}{}\doxysubsection{Hardware used}\label{md__r_e_a_d_m_e_autotoc_md8}

\begin{DoxyItemize}
\item \href{https://abc-rc.pl/product-pol-12737-NANO-V3-16MHz-USB-ATmega168P-odpowiednik-CH340-Klon-kompatybilny-z-Arduino.html}{\texttt{ Arduino Nano}} (At\+Mega328P)
\item \href{https://abc-rc.pl/product-pol-7348-Modul-WIFI-ESP8266-NodeMcu-V3-CH340-Arduino-ESP12E.html}{\texttt{ Node\+Mcu V3}} (E\+S\+P8266\+M\+OD)
\item Generic \href{https://abc-rc.pl/product-pol-6181-Wyswietlacz-LCD-2x16-niebieski-ze-sterownikiem-HD44780-QC1602A.html}{\texttt{ 16x2 L\+CD}} with \href{https://abc-rc.pl/product-pol-6192-Konwerter-I2C-do-wyswietlacza-LCD-HD44780.html}{\texttt{ I2C converter}} (blue)
\item \href{https://botland.com.pl/pl/moduly-i-tagi-rfid/8240-modul-rfidnfc-pn532-1356mhz-i2cspi-karta-i-brelok.html}{\texttt{ R\+F\+ID module}} -\/ P\+N532 based
\item keypad from \href{https://nano.novitus.pl/}{\texttt{ Nano E}}
\item Barcode scanner -\/ compatible with P\+S/2 standard
\end{DoxyItemize}\hypertarget{md__r_e_a_d_m_e_autotoc_md9}{}\doxysubsection{Libraries used}\label{md__r_e_a_d_m_e_autotoc_md9}
\hypertarget{md__r_e_a_d_m_e_autotoc_md10}{}\doxyparagraph{espmain.\+ino}\label{md__r_e_a_d_m_e_autotoc_md10}

\begin{DoxyItemize}
\item Liquid\+Crystal\+\_\+\+I2C
\item Wire
\item Adafruit\+\_\+\+P\+N532
\item E\+E\+P\+R\+OM
\item E\+S\+P8266\+Web\+Server
\item pgmspace
\item E\+S\+P8266\+Wi\+Fi
\item Software\+Serial 
\end{DoxyItemize}\hypertarget{md__r_e_a_d_m_e_autotoc_md11}{}\doxyparagraph{keyboard\+\_\+listener.\+ino}\label{md__r_e_a_d_m_e_autotoc_md11}

\begin{DoxyItemize}
\item Software\+Serial
\item P\+S2\+Keyboard
\item Keypad
\end{DoxyItemize}\hypertarget{md__r_e_a_d_m_e_autotoc_md12}{}\doxysection{License}\label{md__r_e_a_d_m_e_autotoc_md12}
M\+IT 